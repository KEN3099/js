import{r as b,q as A,l as le,b as d,e,ab as _,c as w,aa as g,u as n,F as I,ag as R,ad as t,K as ie,ax as ne,ay as re,N as m,o as r,a9 as P,a5 as ce}from"./@vue-C4NowhOt.js";import{a as W}from"./axios-NIGUFBhG.js";import{_ as de,r as ue}from"./index-CeZUq1ge.js";import{u as pe}from"./vue-i18n-DLYs8-Ps.js";import{a as me,B as _e,m as he,g as ve,h as j,S as ge,I as be,k as ye}from"./ant-design-vue-A2bDz-ar.js";import"./pinia-9OtbBE5K.js";import"./vue-router-PaDTG1U4.js";import"./@ant-design-BGOLSkC9.js";import"./@ctrl-DOFZgDuz.js";import"./element-plus-Mh0yyZIL.js";import"./lodash-es-wgX17T5E.js";import"./@vueuse-BBvwCcyR.js";import"./@element-plus-DaL4F972.js";import"./@popperjs-DB1lLFnh.js";import"./dayjs-CflfeGVC.js";import"./async-validator-CRx4dHSJ.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-DnZj_KkR.js";import"./@babel-Bq4_u9L9.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./vue-types-99Xd1yP8.js";import"./dom-align-CRCehRfe.js";import"./throttle-debounce-CUWDS_la.js";import"./@intlify-ZcBRI--x.js";const u=T=>(ne("data-v-43df00b5"),T=T(),re(),T),fe={class:"room-page-container"},ke={class:"room-container"},we={class:"search-section"},xe={class:"search-controls"},Ce={key:0,class:"search-inputs"},Ie={class:"search-label"},Pe={class:"room-list-wrapper"},Re={class:"room-list"},Te=["onClick"],$e={class:"image-cell"},Se=["src","alt"],Me={class:"details-cell"},Ae={class:"upper-row"},Ne={class:"room-title"},Ke={class:"lower-row"},Le={class:"room-description-text"},ze={class:"room-meta"},De={key:0,class:"meta-item guest-meta"},Oe={key:0,class:"no-results"},Be={key:0,class:"detail-section"},Fe={class:"detail-content"},Ve={class:"detail-image-container"},qe=["src","alt"],Ee={class:"detail-info"},Ue={class:"detail-title"},Ge={class:"room-attributes mobile-attributes"},We={class:"attribute-item"},je={class:"attribute-label"},Ye={class:"attribute-item"},He={class:"attribute-label"},Je={class:"attribute-item"},Qe={class:"attribute-label"},Xe={class:"attribute-item"},Ze={class:"attribute-label"},es={class:"room-description"},ss=u(()=>e("h1",{style:{"text-align":"center"}},"INFORMATION",-1)),ts=u(()=>e("h1",{style:{"text-align":"center"}},"基本信息 基本情報",-1)),os={class:"address-container"},as=u(()=>e("p",{class:"address-label"},[m("Address"),e("br"),m("地址/住所")],-1)),ls={class:"address-container"},is=u(()=>e("p",{class:"address-label"},"最近车站/最寄職",-1)),ns={class:"address-container"},rs=u(()=>e("p",{class:"address-label"},"Google Map定位",-1)),cs=["href"],ds={class:"address-container"},us=u(()=>e("p",{class:"address-label"},[m("Check in Time/入住时间"),e("br"),m("チェックイン時間")],-1)),ps={class:"address-container"},ms=u(()=>e("p",{class:"address-label"},[m("Check out Time/退房"),e("br"),m("チェックアウト時間")],-1)),_s={style:{"white-space":"nowrap"}},hs={class:"address-container"},vs=u(()=>e("p",{class:"address-label"},"Wifi無綫網絡",-1)),gs={key:0,class:"room-images-container"},bs={class:"images-grid"},ys={key:0,class:"image-item"},fs=["src","alt"],ks={class:"image-label"},ws={key:1,class:"image-item"},xs=["src","alt"],Cs={class:"image-label"},Is={key:2,class:"image-item"},Ps=["src","alt"],Rs={class:"image-label"},Ts={class:"calendar-button"},$s={class:"button-group"},Ss={class:"preview-header"},Ms={class:"preview-title"},As=u(()=>e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M18 6L6 18M6 6L18 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),Ns=[As],Ks={class:"preview-image-container"},Ls=["src"],zs=u(()=>e("div",{class:"custom-close-button"},[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("circle",{cx:"12",cy:"12",r:"10",fill:"#ff4d4f"}),e("path",{d:"M8 8L16 16M16 8L8 16",stroke:"white","stroke-width":"2","stroke-linecap":"round"})])],-1)),Ds={key:0,class:"mobile-detail-content"},Os={class:"detail-image-container"},Bs=["src","alt"],Fs={class:"detail-info"},Vs={class:"detail-title"},qs={class:"room-attributes mobile-attributes"},Es={class:"attribute-item"},Us={class:"attribute-label"},Gs={class:"attribute-item"},Ws={class:"attribute-label"},js={class:"attribute-item"},Ys={class:"attribute-label"},Hs={class:"attribute-item"},Js={class:"attribute-label"},Qs={class:"map-description-container mobile-map-container"},Xs={class:"room-description"},Zs=u(()=>e("h1",{style:{"text-align":"center"}},"INFORMATION",-1)),et=u(()=>e("h1",{style:{"text-align":"center"}},"基本信息 基本情報",-1)),st=u(()=>e("span",{class:"address-label"},"Address",-1)),tt=u(()=>e("span",{class:"address-label"},"地址/住所",-1)),ot=u(()=>e("span",{class:"address-label"},"最近车站/最寄職",-1)),at=u(()=>e("span",{class:"address-label"}," Google Map定位",-1)),lt=["href"],it={style:{display:"flex","align-items":"center"}},nt=u(()=>e("span",{class:"address-label"},[m("Check in Time/入住时间"),e("br"),m("チェックイン時間")],-1)),rt={style:{"white-space":"nowrap"}},ct={style:{display:"flex","align-items":"center"}},dt=u(()=>e("span",{class:"address-label"},[m("Check out Time/退房"),e("br"),m("チェックアウト時間")],-1)),ut={style:{"white-space":"nowrap"}},pt=u(()=>e("span",{class:"address-label"},"Wifi無綫網絡",-1)),mt={key:0,class:"room-images-container"},_t={class:"images-grid"},ht={key:0,class:"image-item"},vt=["src","alt"],gt={class:"image-label"},bt={key:1,class:"image-item"},yt=["src","alt"],ft={class:"image-label"},kt={key:2,class:"image-item"},wt=["src","alt"],xt={class:"image-label"},Ct={class:"calendar-button"},It={class:"button-group"},Pt={__name:"Room",setup(T){const{t:a}=pe(),v=b([]),$=b(!1),N=b(null),s=b(null),y=b([]),f=b({}),Y="/api/host/",B=b(!1),S=b(!1),K=b(!1),F=b("");W.defaults.baseURL=Y;const x=A(()=>[{title:a("room.location"),key:"location",dataIndex:"location"},{title:"PID",key:"physicalRoomId",dataIndex:"physicalRoomId"},{title:a("room.roomType"),key:"roomType",dataIndex:"roomType"}]),V=()=>{B.value=window.innerWidth<=768},H=async()=>{$.value=!0;try{const l=await W.get("/host/room/query");v.value=l.data.data,v.value.length>0&&(N.value=0,s.value=v.value[0])}catch(l){console.error("获取房间数据失败:",l),j.error(a("room.fetchDataFailed"))}finally{$.value=!1}},L=A(()=>{if(y.value.length===0)return v.value;const l=y.value.filter(o=>f.value[o]);return l.length===0?v.value:v.value.filter(o=>l.every(p=>{const h=f.value[p]?.toLowerCase()||"",k=x.value.find(O=>O.key===p);if(!k)return!0;switch(k.dataIndex){case"location":return o.location&&o.location.toLowerCase().includes(h);case"physicalRoomId":return o.physicalRoomId&&o.physicalRoomId.toLowerCase().includes(h);case"roomType":return o.roomType&&o.roomType.toLowerCase().includes(h);default:return!0}}))}),J=A(()=>!v.value||v.value.length===0?[]:v.value.map(o=>o.physicalRoomId).filter((o,p,h)=>o&&h.indexOf(o)===p).sort()),Q=A(()=>!v.value||v.value.length===0?[]:v.value.map(o=>o.roomType).filter((o,p,h)=>o&&h.indexOf(o)===p).sort()),q=l=>l.imgPaths&&l.imgPaths.length>0?`https://funkey-public.oss-cn-shenzhen.aliyuncs.com/resource/${l.imgPaths[0]}`:"",X=l=>{N.value=l,s.value=L.value[l],B.value&&(S.value=!0)},E=l=>l.link?`https://funkey-public.oss-cn-shenzhen.aliyuncs.com/resource/${l.link}`:q(l),M=l=>{if(!l)return"";const o=/^(\d{1,2}):(\d{2}):(\d{2})$/,p=l.match(o);if(p){const h=p[1].padStart(2,"0"),k=p[2];return`${h}:${k}`}return l},C=l=>{if(!s.value)return;let o="";switch(l){case"buildingAppearance":o=`https://funkey-public.oss-cn-shenzhen.aliyuncs.com/resource/${s.value.buildingAppearancePic}`;break;case"guestKeybox":o=`https://funkey-public.oss-cn-shenzhen.aliyuncs.com/resource/${s.value.guestKeyboxPic}`;break;case"spareKeybox":o=`https://funkey-public.oss-cn-shenzhen.aliyuncs.com/resource/${s.value.spareKeyboxPic}`;break;default:return}F.value=o,K.value=!0,document.body.style.overflow="hidden"},U=()=>{K.value=!1,document.body.style.overflow=""},G=()=>{if(s.value){const l=new Date,o=l.getFullYear(),p=l.getMonth()+1;ue.push({path:"/orderCal",query:{roomId:s.value.id,physicalRoomId:s.value.physicalRoomId,year:o,month:p}})}else j.warning(a("room.selectRoomFirst"))},Z=l=>{y.value=l},z=(l,o)=>{f.value[l]=o},ee=()=>{y.value=[],Object.keys(f.value).forEach(l=>{delete f.value[l]})},se=()=>{S.value=!1},D=()=>{};return le(()=>{H(),V(),window.addEventListener("resize",V)}),(l,o)=>{const p=ge,h=me,k=_e,O=be,te=ye,oe=he,ae=ve;return r(),d(I,null,[e("div",fe,[e("div",ke,[e("div",we,[e("div",xe,[w(h,{value:y.value,"onUpdate:value":o[0]||(o[0]=i=>y.value=i),placeholder:n(a)("common.select"),mode:"multiple",class:"search-select",onChange:Z},{default:g(()=>[(r(!0),d(I,null,R(x.value,i=>(r(),P(p,{key:i.key,value:i.key},{default:g(()=>[m(t(i.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"]),w(k,{onClick:ee,class:"reset-button"},{default:g(()=>[m(t(n(a)("common.reset")),1)]),_:1})]),y.value.length>0?(r(),d("div",Ce,[(r(!0),d(I,null,R(y.value,i=>(r(),d("div",{key:i,class:"search-input-item"},[e("span",Ie,t(x.value.find(c=>c.key===i)?.title)+": ",1),i==="physicalRoomId"?(r(),P(h,{key:0,placeholder:`选择${x.value.find(c=>c.key===i)?.title}`,value:f.value[i],class:"search-input",onChange:c=>z(i,c),"allow-clear":""},{default:g(()=>[(r(!0),d(I,null,R(J.value,c=>(r(),P(p,{key:c,value:c},{default:g(()=>[m(t(c),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["placeholder","value","onChange"])):i==="roomType"?(r(),P(h,{key:1,placeholder:`选择${x.value.find(c=>c.key===i)?.title}`,value:f.value[i],class:"search-input",onChange:c=>z(i,c),"allow-clear":""},{default:g(()=>[(r(!0),d(I,null,R(Q.value,c=>(r(),P(p,{key:c,value:c},{default:g(()=>[m(t(c),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["placeholder","value","onChange"])):(r(),P(O,{key:2,placeholder:`输入${x.value.find(c=>c.key===i)?.title}`,value:f.value[i],class:"search-input",onChange:c=>z(i,c.target.value)},null,8,["placeholder","value","onChange"]))]))),128))])):_("",!0)]),e("div",Pe,[w(oe,{spinning:$.value,wrapperClassName:"room-spin-wrapper"},{default:g(()=>[e("div",Re,[(r(!0),d(I,null,R(L.value,(i,c)=>(r(),d("div",{key:i.id||c,class:ce(["room-item",{"room-item-selected":N.value===c}]),onClick:Rt=>X(c)},[e("div",$e,[e("img",{src:q(i),alt:i.physicalRoomId||n(a)("room.roomImages"),referrerpolicy:"no-referrer",class:"room-image",onError:D},null,40,Se)]),e("div",Me,[e("div",Ae,[e("h3",Ne,t(i.physicalRoomId),1)]),e("div",Ke,[e("p",Le,t(i.roomArea),1),e("div",ze,[i.bedNum?(r(),d("span",De,t(n(a)("room.bedNum"))+": "+t(i.bedNum),1)):_("",!0)])])])],10,Te))),128)),L.value.length===0&&!$.value?(r(),d("div",Oe,[w(te,{description:n(a)("room.noResults")},null,8,["description"])])):_("",!0)])]),_:1},8,["spinning"])])]),s.value?(r(),d("div",Be,[e("div",Fe,[e("div",Ve,[e("img",{src:E(s.value),alt:s.value.physicalRoomId||"房间详情图片",referrerpolicy:"no-referrer",class:"detail-image",onError:D},null,40,qe)]),e("div",Ee,[e("h2",Ue,t(s.value.physicalRoomId||s.value.nearestStation||n(a)("room.roomName")),1),e("div",Ge,[e("div",We,[e("span",je,t(n(a)("room.roomType"))+"："+t(s.value.roomType),1)]),e("div",Ye,[e("span",He,t(n(a)("room.area"))+"："+t(s.value.coverSquare),1)]),e("div",Je,[e("span",Qe,t(n(a)("room.maxGuestNum"))+"："+t(s.value.maxGuestNum)+t(n(a)("common.people")),1)]),e("div",Xe,[e("span",Ze,t(n(a)("room.nearestStation"))+"："+t(s.value.nearestStation),1)])]),e("div",es,[ss,ts,e("div",os,[as,e("p",null,t(s.value.location),1)]),e("div",ls,[is,e("p",null,t(s.value.nearestStation),1)]),e("div",ns,[rs,e("a",{href:s.value.googleMapLink,target:"_blank"},t(s.value.googleMapLink),9,cs)]),e("div",ds,[us,e("p",null,t(M(s.value.roomCheckinTime)),1)]),e("div",ps,[ms,e("p",_s,t(M(s.value.roomCheckoutTime)),1)]),e("div",hs,[vs,e("p",null,t(s.value.spareKeyInformation),1)])]),s.value.buildingAppearancePic||s.value.guestKeyboxPic||s.value.spareKeyboxPic?(r(),d("div",gs,[e("div",bs,[s.value.buildingAppearancePic?(r(),d("div",ys,[e("img",{src:`https://funkey-public.oss-cn-shenzhen.aliyuncs.com/resource/${s.value.buildingAppearancePic}`,alt:n(a)("room.buildingAppearance"),class:"detail-image-small",referrerpolicy:"no-referrer",onClick:o[1]||(o[1]=i=>C("buildingAppearance"))},null,8,fs),e("span",ks,t(n(a)("room.buildingAppearance")),1)])):_("",!0),s.value.guestKeyboxPic?(r(),d("div",ws,[e("img",{src:`https://funkey-public.oss-cn-shenzhen.aliyuncs.com/resource/${s.value.guestKeyboxPic}`,alt:n(a)("room.guestKeybox"),class:"detail-image-small",referrerpolicy:"no-referrer",onClick:o[2]||(o[2]=i=>C("guestKeybox"))},null,8,xs),e("span",Cs,t(n(a)("room.guestKeybox")),1)])):_("",!0),s.value.spareKeyboxPic?(r(),d("div",Is,[e("img",{src:`https://funkey-public.oss-cn-shenzhen.aliyuncs.com/resource/${s.value.spareKeyboxPic}`,alt:n(a)("room.spareKeybox"),class:"detail-image-small",referrerpolicy:"no-referrer",onClick:o[3]||(o[3]=i=>C("spareKeybox"))},null,8,Ps),e("span",Rs,t(n(a)("room.spareKeybox")),1)])):_("",!0)])])):_("",!0),e("div",Ts,[e("div",$s,[w(k,{type:"primary",onClick:G,size:"large"},{default:g(()=>[m(t(n(a)("room.viewCalendar")),1)]),_:1})])])])])])):_("",!0)]),K.value?(r(),d("div",{key:0,class:"image-preview-modal",onClick:U},[e("div",{class:"preview-content",onClick:o[4]||(o[4]=ie(()=>{},["stop"]))},[e("div",Ss,[e("div",Ms,t(n(a)("room.imagePreview")),1),e("div",{class:"close-btn",onClick:U},Ns)]),e("div",Ks,[e("img",{src:F.value,class:"preview-image",referrerpolicy:"no-referrer"},null,8,Ls)])])])):_("",!0),w(ae,{open:S.value,"onUpdate:open":o[8]||(o[8]=i=>S.value=i),footer:null,closable:!0,width:"90%",wrapClassName:"mobile-detail-modal",onCancel:se},{closeIcon:g(()=>[zs]),default:g(()=>[s.value?(r(),d("div",Ds,[e("div",Os,[e("img",{src:E(s.value),alt:s.value.physicalRoomId||"房间详情图片",referrerpolicy:"no-referrer",class:"detail-image",onError:D},null,40,Bs)]),e("div",Fs,[e("h2",Vs,t(s.value.physicalRoomId||s.value.nearestStation||n(a)("room.roomName")),1),e("div",qs,[e("div",Es,[e("span",Us,t(n(a)("room.roomType"))+"："+t(s.value.roomType),1)]),e("div",Gs,[e("span",Ws,t(n(a)("room.area"))+"："+t(s.value.coverSquare),1)]),e("div",js,[e("span",Ys,t(n(a)("room.maxGuestNum"))+"："+t(s.value.maxGuestNum)+t(n(a)("common.people")),1)]),e("div",Hs,[e("span",Js,t(n(a)("room.nearestStation"))+"："+t(s.value.nearestStation),1)])]),e("div",Qs,[e("div",Xs,[Zs,et,e("p",null,[st,e("span",null,t(s.value.location),1)]),e("p",null,[tt,e("span",null,t(s.value.location),1)]),e("p",null,[ot,e("span",null,t(s.value.nearestStation),1)]),e("p",null,[at,e("a",{href:s.value.googleMapLink,target:"_blank"},t(s.value.googleMapLink),9,lt)]),e("div",it,[nt,e("span",rt,t(M(s.value.roomCheckinTime)),1)]),e("div",ct,[dt,e("span",ut,t(M(s.value.roomCheckoutTime)),1)]),e("p",null,[pt,e("span",null,t(s.value.spareKeyInformation),1)])])]),s.value.buildingAppearancePic||s.value.guestKeyboxPic||s.value.spareKeyboxPic?(r(),d("div",mt,[e("div",_t,[s.value.buildingAppearancePic?(r(),d("div",ht,[e("img",{src:`https://funkey-public.oss-cn-shenzhen.aliyuncs.com/resource/${s.value.buildingAppearancePic}`,alt:n(a)("room.buildingAppearance"),class:"detail-image-small",referrerpolicy:"no-referrer",onClick:o[5]||(o[5]=i=>C("buildingAppearance"))},null,8,vt),e("span",gt,t(n(a)("room.buildingAppearance")),1)])):_("",!0),s.value.guestKeyboxPic?(r(),d("div",bt,[e("img",{src:`https://funkey-public.oss-cn-shenzhen.aliyuncs.com/resource/${s.value.guestKeyboxPic}`,alt:n(a)("room.guestKeybox"),class:"detail-image-small",referrerpolicy:"no-referrer",onClick:o[6]||(o[6]=i=>C("guestKeybox"))},null,8,yt),e("span",ft,t(n(a)("room.guestKeybox")),1)])):_("",!0),s.value.spareKeyboxPic?(r(),d("div",kt,[e("img",{src:`https://funkey-public.oss-cn-shenzhen.aliyuncs.com/resource/${s.value.spareKeyboxPic}`,alt:n(a)("room.spareKeybox"),class:"detail-image-small",referrerpolicy:"no-referrer",onClick:o[7]||(o[7]=i=>C("spareKeybox"))},null,8,wt),e("span",xt,t(n(a)("room.spareKeybox")),1)])):_("",!0)])])):_("",!0),e("div",Ct,[e("div",It,[w(k,{type:"primary",onClick:G,block:"",size:"large"},{default:g(()=>[m(t(n(a)("room.viewCalendar")),1)]),_:1})])])])])):_("",!0)]),_:1},8,["open"])],64)}}},oo=de(Pt,[["__scopeId","data-v-43df00b5"]]);export{oo as default};
