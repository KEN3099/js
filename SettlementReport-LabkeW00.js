import{a as de,r as p,q as A,l as Ze,z as et,a9 as D,aa as s,o as _,c as o,e as d,u as n,N as r,ad as i,b as R,ab as q,F as G,a4 as xe,K as re}from"./@vue-C4NowhOt.js";import{u as tt}from"./vue-i18n-DLYs8-Ps.js";import{a as I}from"./axios-NIGUFBhG.js";import{d as we}from"./dayjs-CflfeGVC.js";import{_ as at}from"./index-CeZUq1ge.js";import{h as c,d as lt,f as ot,C as st,F as nt,n as it,a as dt,D as rt,B as ut,j as ct,T as mt,o as pt,s as vt,g as ft,q as yt,r as _t,i as ht,l as bt,I as gt,t as xt}from"./ant-design-vue-A2bDz-ar.js";import"./@intlify-ZcBRI--x.js";import"./pinia-9OtbBE5K.js";import"./vue-router-PaDTG1U4.js";import"./@ant-design-BGOLSkC9.js";import"./@ctrl-DOFZgDuz.js";import"./element-plus-Mh0yyZIL.js";import"./lodash-es-wgX17T5E.js";import"./@vueuse-BBvwCcyR.js";import"./@element-plus-DaL4F972.js";import"./@popperjs-DB1lLFnh.js";import"./async-validator-CRx4dHSJ.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-DnZj_KkR.js";import"./@babel-Bq4_u9L9.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./vue-types-99Xd1yP8.js";import"./dom-align-CRCehRfe.js";import"./throttle-debounce-CUWDS_la.js";const wt={class:"form-fields"},It={class:"form-actions"},kt=["onClick"],Ft=["onClick"],Ct=["onClick"],St={class:"action-link",style:{color:"#ff4d4f"}},Tt=["title"],Yt=["src"],Mt={class:"button-align-right"},Ut={class:"bill-summary"},Dt={class:"summary-item"},Rt={class:"summary-item"},qt={class:"payment-table-container"},Nt={colspan:"6",style:{"text-align":"right","font-weight":"bold"}},At={colspan:"3"},zt={class:"summary-container"},Pt={class:"summary-item"},Kt={class:"summary-item"},Lt={class:"summary-item"},Bt={class:"button-align-right"},Ht={key:0,class:"audit-modal-content"},Ot={class:"audit-modal-footer"},Vt={__name:"SettlementReport",setup($t){const{t}=tt(),x=de({hostId:null,periodFrom:null,periodTo:null}),Ie="/api/host/";I.defaults.baseURL=Ie;const ue=p([]),N=p(!1),w=p(!1),k=de({current:1,pageSize:10,total:0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}),J=p([]),j=p(!1),ke=A(()=>[{label:t("common.all"),value:null},...J.value]),Fe=A(()=>{const a=[{title:"Host Name",dataIndex:"hostName",width:150},{title:t("settlement.hostName"),dataIndex:"billName",width:150},{title:t("settlement.status"),dataIndex:"status",width:80},{title:t("settlement.period"),dataIndex:"period",width:150},{title:t("settlement.incomeAmount"),dataIndex:"income",width:100},{title:t("settlement.deductionAmount"),dataIndex:"payment",width:100},{title:t("settlement.actualSettlementAmount"),dataIndex:"balance",width:100},{title:t("settlement.generateTime"),dataIndex:"gentime",width:150},{title:t("settlement.updateTime"),dataIndex:"uptime",width:150},{title:t("fields.action"),dataIndex:"action",width:220,fixed:w.value?void 0:"right"}];return w.value?a.filter(e=>e.dataIndex==="period"||e.dataIndex==="balance"||e.dataIndex==="action").map(e=>e.dataIndex==="period"?{...e,width:120}:e.dataIndex==="balance"?{...e,width:80}:e.dataIndex==="action"?{...e,width:80}:e):a}),X=p(!1),F=p({}),z=p(""),Q=p(!1),C=p(!1),P=p(!1),h=de({hostIds:[],periodFrom:null,periodTo:null}),K=p([]),V=p([]),Z=p(!1),ee=p(!1),S=p([]),te=p(!1);let Ce=1;const L=p([]),B=p({selectedRowKeys:[],onChange:a=>{B.value.selectedRowKeys=a}}),H=A(()=>{const a=new Set(B.value.selectedRowKeys);return L.value.reduce((u,v)=>{if(!a.has(v._rowKey))return u;const f=parseFloat(v.subtotal)||0;return u+f},0).toFixed(2)}),O=A(()=>`${K.value.filter(e=>S.value.includes(e.id)).reduce((e,u)=>e+(parseFloat(u.grandTotal)||0),0).toFixed(2)}`),ae=A(()=>{const a=parseFloat(O.value.replace("Â¥",""))||0,e=parseFloat(H.value)||0;return`Â¥${(a-e).toFixed(2)}`}),ce=p([]),le=p([]),$=p(!1),T=p(null),Se=A(()=>[{title:"Host Name",dataIndex:"hostName",width:150},{title:t("fields.billName"),dataIndex:"billName",width:150},{title:t("fields.incomeAmount"),dataIndex:"grandTotal",width:150},{title:t("fields.period"),dataIndex:"period",width:150}]),Te=A(()=>[{title:t("expenses.pid"),dataIndex:"pid",width:60},{title:t("expenses.item"),dataIndex:"item",width:120},{title:t("time.startDate"),dataIndex:"startDate",width:100},{title:t("time.endDate"),dataIndex:"endDate",width:100},{title:t("expenses.quantity"),dataIndex:"quantity",width:100},{title:t("expenses.unitPrice"),dataIndex:"unitPrice",width:100},{title:t("expenses.amount"),dataIndex:"amount",width:100},{title:t("expenses.bankFee"),dataIndex:"bankFee",width:100},{title:t("expenses.subtotal"),dataIndex:"subtotal",width:100},{title:t("expenses.remark"),dataIndex:"remark",width:120}]),oe=()=>{w.value=window.innerWidth<=768},me=a=>({0:t("status.pendingAudit"),1:t("status.pendingSettlement"),2:t("status.settled")})[a]||t("status.unknown"),pe=a=>({0:"default",1:"processing",2:"success"})[a]||"default",se=a=>a?we(a).format("YYYY-MM-DD HH:mm:ss"):"-",ve=a=>a&&a>we().endOf("month"),M=async()=>{try{N.value=!0;const a={page:k.current,size:k.pageSize,...x};a.periodFrom&&(a.periodFrom=a.periodFrom.format("YYYY-MM")),a.periodTo&&(a.periodTo=a.periodTo.format("YYYY-MM"));const e=await I.post("/admin/settlementReport/query",a);e.data.code==200?(ue.value=e.data.data.records||e.data.data||[],k.total=e.data.data.total||0):c.error(e.data.message||t("common.queryFailed"))}catch(a){console.error("Query failed:",a),c.error(t("common.queryFailed")+": "+a.message)}finally{N.value=!1}},Ye=async()=>{try{j.value=!0;const a=await I.get("/admin/host/getAllHostName");a.data.code==200?J.value=a.data.data.map(e=>({label:e.hostName,value:e.id})):c.error(a.data.message||t("common.getHostListFailed"))}catch(a){console.error("Get host list failed:",a),c.error(t("common.getHostListFailed")+": "+a.message)}finally{j.value=!1}},Me=()=>{k.current=1,M()},Ue=()=>{x.hostId=null,x.periodFrom=null,x.periodTo=null,k.current=1,M()},De=a=>{k.current=a.current,k.pageSize=a.pageSize,M()},Re=()=>{P.value=!0,h.hostIds=[],h.periodFrom=null,h.periodTo=null,K.value=[],V.value=[],S.value=[],te.value=!1,L.value=[],B.value.selectedRowKeys=[],ce.value=[],le.value=[]},qe=async()=>{try{Z.value=!0;const a={hostIds:h.hostIds,...h.periodFrom&&{periodFrom:h.periodFrom.format("YYYY-MM")},...h.periodTo&&{periodTo:h.periodTo.format("YYYY-MM")}},e=await I.post("/admin/billReport/queryByHostId",a);e.data.code==200?(V.value=e.data.data||[],K.value=[...V.value]):c.error(e.data.message||t("common.queryFailed"))}catch(a){console.error("Query failed:",a),c.error(t("common.queryFailed")+": "+a.message)}finally{Z.value=!1}},Ne=a=>{S.value=a},Ae=a=>{a.target.checked?K.value=V.value.filter(e=>S.value.includes(e.id)):K.value=[...V.value]},ze=async()=>{if(S.value.length===0){c.warning(t("settlement.selectOneBill"));return}try{const a=await I.post("/admin/settlementReport/queryExpenses",{ids:S.value});a.data.code==200&&a.data.data?(L.value=a.data.data.map(e=>({_rowKey:`pi_${Ce++}`,...e,quantity:e.quantity||"",unitPrice:e.unitPrice||"",amount:e.amount||"",bankFee:e.bankFee||"",subtotal:e.subtotal||""})),B.value.selectedRowKeys=L.value.map(e=>e._rowKey),c.success(t("settlement.queryExpensesSuccess"))):c.error(a.data.message||t("common.queryFailed"))}catch(a){console.error("Query expenses failed:",a),c.error(t("settlement.queryExpensesFailed")+": "+a.message)}},Pe=(a,e,u)=>{let f=u.target.value.replace(/[^0-9]/g,"");a[e]=f,e==="quantity"&&fe(a)},Ke=(a,e,u)=>{let f=u.target.value.replace(/[^0-9.]/g,"");const y=f.split(".");y.length>2&&(f=y[0]+"."+y.slice(1).join("")),a[e]=f,(e==="unitPrice"||e==="bankFee")&&fe(a)},fe=a=>{const e=parseFloat(a.quantity)||0,u=parseFloat(a.unitPrice)||0,v=parseFloat(a.bankFee)||0,f=e*u;a.amount=f.toFixed(2);const y=f+v;a.subtotal=y.toFixed(2)},Le=a=>{T.value=a,$.value=!0},Be=async a=>{try{N.value=!0;const e=new FormData;e.append("id",a.id),e.append("status",2);const u=await I.post("/admin/settlementReport/changeStatus",e);u.data.code==200?(await M(),c.success(t("common.success"))):c.error(u.data.message||t("common.failed"))}catch(e){console.error("Settle failed:",e),c.error(t("common.failed")+": "+(e.response?.data?.message||e.message))}finally{N.value=!1}},He=async()=>{try{N.value=!0;const a=new FormData;a.append("id",T.value.id),a.append("status",1);const e=await I.post("/admin/settlementReport/changeStatus",a);e.data.code==200?(await M(),$.value=!1,c.success(t("settlement.auditSuccess"))):c.error(e.data.message||t("settlement.auditFailed"))}catch(a){console.error("Audit failed:",a),c.error(t("settlement.auditFailed")+": "+(a.response?.data?.message||a.message))}finally{N.value=!1}},ye=()=>{$.value=!1,T.value=null},Oe=async a=>{try{const e=new FormData;e.append("id",a.id);const u=await I.post("/admin/settlementReport/delete",e);u.data.code==200?(c.success(t("settlement.deleteSuccess")),M()):c.error(u.data.message||t("settlement.deleteFailed"))}catch(e){console.error("Delete failed:",e),c.error(t("settlement.deleteFailed")+": "+(e.response?.data?.message||e.message))}},Ve=async()=>{if(S.value.length===0){c.warning(t("settlement.selectOneBill"));return}try{ee.value=!0;const a=le.value.map(U=>U.uuid).join(","),e=new Set(B.value.selectedRowKeys),v=L.value.filter(U=>e.has(U._rowKey)).map(U=>U.id),f=parseFloat(ae.value.replace("Â¥",""))||0,y={billIds:S.value,expensesIds:v,paymentTotal:H.value,totalIncome:f,selectedBillTotal:O.value,...a&&{fileUuids:a}},E=await I.post("/admin/settlementReport/save",y);E.data.code==200?(c.success(t("settlement.createSuccess")),P.value=!1,ce.value=[],le.value=[],M()):c.error(E.data.message||t("settlement.createFailed"))}catch(a){console.error("Create failed:",a),c.error(t("settlement.createFailed")+": "+a.message)}finally{ee.value=!1}},$e=async a=>{try{const e={id:a.id,period:a.period},u=await I.get("/admin/settlementReport/generate",{params:e});u.data.code==200?(z.value=u.data.data,Q.value=!0):c.error(u.data.message||t("settlement.getPDFFailed"))}catch(e){console.error("Preview failed:",e),c.error(t("settlement.previewFailed")+": "+(e.response?.data?.message||e.message))}},_e=()=>{z.value&&(window.URL.revokeObjectURL(z.value),z.value=""),Q.value=!1,C.value=!1},Ee=()=>{C.value=!C.value},he=(a,e)=>e.label.toLowerCase().indexOf(a.toLowerCase())>=0;return Ze(()=>{oe(),Ye(),M(),window.addEventListener("resize",oe)}),et(()=>{window.removeEventListener("resize",oe)}),(a,e)=>{const u=dt,v=it,f=rt,y=ut,E=nt,U=st,be=mt,je=vt,Qe=pt,ne=ct,We=ot,g=_t,ge=yt,W=ft,ie=bt,Ge=ht,Y=gt,Je=xt,Xe=lt;return _(),D(Xe,{class:"billing-report-page"},{default:s(()=>[o(We,{class:"content"},{default:s(()=>[o(U,{class:"query-card"},{default:s(()=>[o(E,{model:x,layout:"inline",class:"query-form"},{default:s(()=>[d("div",wt,[o(v,{label:"Host Name",class:"form-item"},{default:s(()=>[o(u,{value:x.hostId,"onUpdate:value":e[0]||(e[0]=l=>x.hostId=l),"show-search":"",placeholder:n(t)("common.select"),class:"responsive-select",style:{width:"150px"},options:ke.value,loading:j.value,"filter-option":he,"get-popup-container":l=>l.parentNode},null,8,["value","placeholder","options","loading","get-popup-container"])]),_:1}),o(v,{label:n(t)("fields.periodFrom"),class:"form-item"},{default:s(()=>[o(f,{value:x.periodFrom,"onUpdate:value":e[1]||(e[1]=l=>x.periodFrom=l),picker:"month",format:"YYYY-MM",placeholder:n(t)("fields.selectPeriodFrom"),class:"responsive-date-picker","disabled-date":ve,"get-popup-container":l=>l.parentNode},null,8,["value","placeholder","get-popup-container"])]),_:1},8,["label"]),o(v,{label:n(t)("fields.periodTo"),class:"form-item"},{default:s(()=>[o(f,{value:x.periodTo,"onUpdate:value":e[2]||(e[2]=l=>x.periodTo=l),picker:"month",format:"YYYY-MM",placeholder:n(t)("fields.selectPeriodTo"),class:"responsive-date-picker","disabled-date":ve,"get-popup-container":l=>l.parentNode},null,8,["value","placeholder","get-popup-container"])]),_:1},8,["label"])]),d("div",It,[o(v,{class:"action-buttons"},{default:s(()=>[o(y,{type:"primary",onClick:Me,class:"action-button"},{default:s(()=>[r(i(n(t)("common.search")),1)]),_:1}),o(y,{style:{"margin-left":"8px"},onClick:Ue,class:"action-button"},{default:s(()=>[r(i(n(t)("common.reset")),1)]),_:1}),o(y,{style:{"margin-left":"8px"},type:"primary",onClick:Re,class:"action-button"},{default:s(()=>[r(i(n(t)("common.add")),1)]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1}),o(U,{class:"table-card",bodyStyle:{padding:0}},{default:s(()=>[o(ne,{dataSource:ue.value,columns:Fe.value,loading:N.value,onChange:De,rowKey:"id",scroll:w.value?{x:1e3}:void 0,size:w.value?"small":"default",pagination:w.value?{...k,simple:!0}:k},{bodyCell:s(({column:l,record:m})=>[l.dataIndex==="status"?(_(),D(be,{key:0,color:pe(m.status),class:"status-tag"},{default:s(()=>[r(i(me(m.status)),1)]),_:2},1032,["color"])):l.dataIndex==="gentime"||l.dataIndex==="uptime"?(_(),R(G,{key:1},[r(i(se(m[l.dataIndex])),1)],64)):l.dataIndex==="income"||l.dataIndex==="payment"||l.dataIndex==="balance"?(_(),R(G,{key:2},[r(i(m[l.dataIndex]),1)],64)):l.dataIndex==="action"?(_(),D(Qe,{key:3,size:w.value?"small":"middle",class:"action-space"},{default:s(()=>[d("a",{onClick:b=>$e(m),class:"pdf-link",style:{"margin-right":"8px"}},i(n(t)("common.preview"))+"/"+i(n(t)("common.download")),9,kt),m.status===0?(_(),R("a",{key:0,onClick:b=>Le(m),class:"action-link",style:{color:"#52c41a"}},i(n(t)("common.audit")),9,Ft)):q("",!0),m.status===1?(_(),R("a",{key:1,onClick:b=>Be(m),class:"action-link",style:{color:"#1890ff"}},i(n(t)("settlement.settle")),9,Ct)):q("",!0),o(je,{title:n(t)("common.confirm"),onConfirm:b=>Oe(m),"ok-text":n(t)("common.ok"),"cancel-text":n(t)("common.cancel")},{default:s(()=>[d("a",St,i(n(t)("common.delete")),1)]),_:2},1032,["title","onConfirm","ok-text","cancel-text"])]),_:2},1032,["size"])):q("",!0)]),_:1},8,["dataSource","columns","loading","scroll","size","pagination"])]),_:1})]),_:1}),o(W,{visible:X.value,"onUpdate:visible":e[3]||(e[3]=l=>X.value=l),title:n(t)("settlement.settlementDetails"),onCancel:e[4]||(e[4]=l=>X.value=!1),footer:null,width:w.value?"95%":"600px"},{default:s(()=>[F.value?(_(),D(ge,{key:0,bordered:"",size:"small",column:1},{default:s(()=>[o(g,{label:n(t)("settlement.period")},{default:s(()=>[r(i(F.value.period),1)]),_:1},8,["label"]),o(g,{label:n(t)("settlement.income")},{default:s(()=>[r(i(F.value.income),1)]),_:1},8,["label"]),o(g,{label:n(t)("settlement.payment")},{default:s(()=>[r(i(F.value.payment),1)]),_:1},8,["label"]),o(g,{label:n(t)("settlement.balance")},{default:s(()=>[r(i(F.value.balance),1)]),_:1},8,["label"]),o(g,{label:n(t)("settlement.status")},{default:s(()=>[o(be,{color:pe(F.value.status),class:"status-tag"},{default:s(()=>[r(i(me(F.value.status)),1)]),_:1},8,["color"])]),_:1},8,["label"]),o(g,{label:n(t)("settlement.generateTime")},{default:s(()=>[r(i(se(F.value.gentime)),1)]),_:1},8,["label"]),o(g,{label:n(t)("settlement.updateTime")},{default:s(()=>[r(i(se(F.value.uptime)),1)]),_:1},8,["label"])]),_:1})):q("",!0)]),_:1},8,["visible","title","width"]),o(W,{visible:Q.value,"onUpdate:visible":e[6]||(e[6]=l=>Q.value=l),title:n(t)("settlement.pdfPreview"),onCancel:_e,footer:null,width:w.value?"95%":C.value?"100%":"80%",wrapClassName:C.value?"pdf-preview-modal fullscreen":"pdf-preview-modal",style:xe(C.value?{position:"fixed",top:0,left:0,width:"100%",height:"100%",margin:0,padding:0}:{}),closable:!1},{default:s(()=>[d("div",{style:{display:"flex","align-items":"center",position:"absolute",right:"20px",top:"15px","z-index":"1000"},onClick:e[5]||(e[5]=re(()=>{},["stop"]))},[d("button",{onClick:re(Ee,["stop"]),style:{"margin-right":"15px",background:"#1890ff",border:"none",cursor:"pointer",color:"white","font-size":"16px",width:"32px",height:"32px","border-radius":"4px",display:"flex","align-items":"center","justify-content":"center","font-weight":"bold",outline:"none"},title:C.value?n(t)("fullscreen.exit"):n(t)("fullscreen.enter")},i(C.value?"ðŸ——":"â›¶"),9,Tt),d("span",{onClick:re(_e,["stop"]),style:{cursor:"pointer","font-size":"32px",color:"#000000",display:"flex","align-items":"center","justify-content":"center",width:"32px",height:"32px",outline:"none","box-shadow":"none"}},"Ã—")]),z.value?(_(),R("div",{key:0,class:"pdf-container",style:xe(C.value?{height:"calc(100vh - 40px)"}:{height:"70vh"})},[d("iframe",{src:z.value,class:"pdf-iframe"},null,8,Yt)],4)):q("",!0)]),_:1},8,["visible","title","width","wrapClassName","style"]),o(W,{visible:P.value,"onUpdate:visible":e[17]||(e[17]=l=>P.value=l),title:n(t)("settlement.newSettlement"),onCancel:e[18]||(e[18]=l=>P.value=!1),footer:null,width:w.value?"95%":"80%"},{default:s(()=>[o(E,{model:h,layout:"vertical"},{default:s(()=>[o(Ge,{gutter:16},{default:s(()=>[o(ie,{span:8},{default:s(()=>[o(v,{label:"Host Name"},{default:s(()=>[o(u,{value:h.hostIds,"onUpdate:value":e[7]||(e[7]=l=>h.hostIds=l),"show-search":"",placeholder:n(t)("common.select"),options:J.value,loading:j.value,"filter-option":he,mode:"multiple"},null,8,["value","placeholder","options","loading"])]),_:1})]),_:1}),o(ie,{span:8},{default:s(()=>[o(v,{label:n(t)("fields.periodFrom")},{default:s(()=>[o(f,{value:h.periodFrom,"onUpdate:value":e[8]||(e[8]=l=>h.periodFrom=l),picker:"month",format:"YYYY-MM",placeholder:n(t)("fields.periodFrom"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),o(ie,{span:8},{default:s(()=>[o(v,{label:n(t)("fields.periodTo")},{default:s(()=>[o(f,{value:h.periodTo,"onUpdate:value":e[9]||(e[9]=l=>h.periodTo=l),picker:"month",format:"YYYY-MM",placeholder:n(t)("fields.periodTo"),style:{width:"100%"}},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),o(v,{class:"search-button-item"},{default:s(()=>[d("div",Mt,[o(y,{type:"primary",onClick:qe},{default:s(()=>[r(i(n(t)("common.search")),1)]),_:1})])]),_:1}),o(v,{label:n(t)("settlement.selectBill")},{default:s(()=>[o(ne,{dataSource:K.value,columns:Se.value,loading:Z.value,"row-selection":{selectedRowKeys:S.value,onChange:Ne},rowKey:"id",pagination:!1,scroll:{y:300}},{bodyCell:s(({column:l,record:m})=>[l.dataIndex==="period"?(_(),R(G,{key:0},[r(i(m.period),1)],64)):l.dataIndex==="grandTotal"?(_(),R(G,{key:1},[r(i(m.grandTotal),1)],64)):q("",!0)]),_:1},8,["dataSource","columns","loading","row-selection"]),d("div",Ut,[d("div",Dt,[d("span",null,i(n(t)("settlement.totalIncomeAmount"))+":",1),o(Y,{value:O.value,"onUpdate:value":e[10]||(e[10]=l=>O.value=l),style:{width:"150px","margin-left":"10px"},disabled:""},null,8,["value"])]),d("div",Rt,[o(Je,{checked:te.value,"onUpdate:checked":e[11]||(e[11]=l=>te.value=l),onChange:Ae},{default:s(()=>[r(i(n(t)("settlement.showSelectedOnly")),1)]),_:1},8,["checked"])])])]),_:1},8,["label"]),o(v,{label:n(t)("settlement.selectExpenses")},{default:s(()=>[o(y,{onClick:ze,type:"primary",size:"small",style:{"margin-bottom":"10px"}},{default:s(()=>[r(i(n(t)("common.search")),1)]),_:1}),d("div",qt,[o(ne,{dataSource:L.value,columns:Te.value,rowKey:"_rowKey",pagination:!1,size:"small",scroll:{x:1200},"row-selection":B.value},{bodyCell:s(({column:l,record:m})=>[l.dataIndex==="unitPrice"||l.dataIndex==="bankFee"?(_(),D(Y,{key:0,value:m[l.dataIndex],"onUpdate:value":b=>m[l.dataIndex]=b,onInput:b=>Ke(m,l.dataIndex,b),style:{width:"100%"},disabled:""},null,8,["value","onUpdate:value","onInput"])):l.dataIndex==="amount"||l.dataIndex==="subtotal"?(_(),D(Y,{key:1,value:m[l.dataIndex],"onUpdate:value":b=>m[l.dataIndex]=b,style:{width:"100%"},disabled:""},null,8,["value","onUpdate:value"])):l.dataIndex==="quantity"?(_(),D(Y,{key:2,value:m[l.dataIndex],"onUpdate:value":b=>m[l.dataIndex]=b,onInput:b=>Pe(m,l.dataIndex,b),style:{width:"100%"},disabled:""},null,8,["value","onUpdate:value","onInput"])):l.dataIndex==="item"||l.dataIndex==="summary"||l.dataIndex==="remark"?(_(),D(Y,{key:3,value:m[l.dataIndex],"onUpdate:value":b=>m[l.dataIndex]=b,style:{width:"100%"},disabled:""},null,8,["value","onUpdate:value"])):q("",!0)]),footer:s(()=>[d("tr",null,[d("td",Nt,i(n(t)("settlement.deductionAmount"))+"ï¼š ",1),d("td",At,[o(Y,{value:H.value,"onUpdate:value":e[12]||(e[12]=l=>H.value=l),placeholder:n(t)("settlement.autoCalculate"),disabled:""},null,8,["value","placeholder"])])])]),_:1},8,["dataSource","columns","row-selection"])])]),_:1},8,["label"]),o(v,null,{default:s(()=>[d("div",zt,[d("div",Pt,[d("span",null,i(n(t)("settlement.totalIncomeAmount"))+":",1),o(Y,{value:O.value,"onUpdate:value":e[13]||(e[13]=l=>O.value=l),style:{width:"150px","margin-left":"10px"},disabled:""},null,8,["value"])]),d("div",Kt,[d("span",null,i(n(t)("settlement.deductionAmount"))+":",1),o(Y,{value:H.value,"onUpdate:value":e[14]||(e[14]=l=>H.value=l),style:{width:"150px","margin-left":"10px"},disabled:""},null,8,["value"])]),d("div",Lt,[d("span",null,i(n(t)("settlement.actualIncomeAmount"))+":",1),o(Y,{value:ae.value,"onUpdate:value":e[15]||(e[15]=l=>ae.value=l),style:{width:"150px","margin-left":"10px"},disabled:""},null,8,["value"])])])]),_:1}),o(v,{class:"footer-buttons-item"},{default:s(()=>[d("div",Bt,[o(y,{type:"primary",onClick:Ve,loading:ee.value},{default:s(()=>[r(i(n(t)("common.ok")),1)]),_:1},8,["loading"]),o(y,{style:{"margin-left":"8px"},onClick:e[16]||(e[16]=l=>P.value=!1)},{default:s(()=>[r(i(n(t)("common.cancel")),1)]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","width"]),o(W,{visible:$.value,"onUpdate:visible":e[19]||(e[19]=l=>$.value=l),title:n(t)("settlement.auditConfirm"),onCancel:ye,footer:null,width:w.value?"95%":"400px"},{default:s(()=>[T.value?(_(),R("div",Ht,[d("p",null,i(n(t)("settlement.confirmAuditSettlement")),1),o(ge,{bordered:"",size:"small",column:1},{default:s(()=>[o(g,{label:n(t)("fields.host")},{default:s(()=>[r(i(T.value.hostName),1)]),_:1},8,["label"]),o(g,{label:n(t)("settlement.period")},{default:s(()=>[r(i(T.value.period),1)]),_:1},8,["label"]),o(g,{label:n(t)("settlement.incomeAmount")},{default:s(()=>[r(i(T.value.income),1)]),_:1},8,["label"]),o(g,{label:n(t)("settlement.deductionAmount")},{default:s(()=>[r(i(T.value.payment),1)]),_:1},8,["label"]),o(g,{label:n(t)("settlement.actualSettlementAmount")},{default:s(()=>[r(i(T.value.balance),1)]),_:1},8,["label"])]),_:1}),d("div",Ot,[o(y,{onClick:ye,class:"audit-cancel-button"},{default:s(()=>[r(i(n(t)("common.cancel")),1)]),_:1}),o(y,{type:"primary",onClick:He,class:"audit-confirm-button"},{default:s(()=>[r(i(n(t)("common.ok")),1)]),_:1})])])):q("",!0)]),_:1},8,["visible","title","width"])]),_:1})}}},xa=at(Vt,[["__scopeId","data-v-d6e4699b"]]);export{xa as default};
